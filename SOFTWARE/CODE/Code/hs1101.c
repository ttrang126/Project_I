#include <REGX52.H>
#include "hs1101.h"
#include "delay.h"
#include "port.h"

code int hs1101[101] = {
						7351, 7338, 7325, 7312, 7299, 7286, 7273, 7260, 7247, 7234, 
						7221, 7208, 7195, 7182, 7169, 7156, 7143, 7130, 7117, 7104, 
						7091, 7078, 7065, 7052, 7039, 7026, 7013, 7000, 6987, 6974, 
						6961, 6948, 6935, 6922, 6909, 6896, 6883, 6870, 6857, 6844, 
						6831, 6818, 6805, 6792, 6779, 6766, 6753, 6740, 6727, 6714, 
						6701, 6688, 6675, 6662, 6649, 6636, 6623, 6610, 6597, 6584, 
						6571, 6558, 6545, 6532, 6519, 6506, 6493, 6480, 6467, 6454, 
						6441, 6428, 6415, 6402, 6389, 6376, 6363, 6350, 6337, 6324, 
						6311, 6298, 6285, 6272, 6259, 6246, 6233, 6220, 6207, 6194, 
						6181, 6168, 6155, 6142, 6129, 6116, 6103, 6090, 6077, 6064, 6051
						};

unsigned int Freq(void) 
{
	unsigned int pulses = 0;
	TMOD = 0x51;
	//HS1101 = 0xFF;
	TL1 = 0;
	TH1 = 0;
	TR1 = 1;
	delay(100);
	TR1 = 0;
	pulses = (TH1 * (0x100)) + TL1;
	pulses = pulses * 10;
	return pulses;
}
					   

unsigned short Humd(unsigned int Frequency)
{
	int i;
	for (i = 0; i < 101; i++) 
	{
		if((Frequency) > hs1101[i]) return i;
	}	
	return 100;
}


